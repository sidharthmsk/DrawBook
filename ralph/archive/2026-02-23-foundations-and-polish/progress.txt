# Drawbook - Foundations & Polish
# Branch: ralph/foundations-and-polish
# Started: 2026-02-23

## US-001: Extend DocMetadata with optional fields ✅
- Added createdAt?, createdBy?, modifiedBy?, tags?, starred? to DocMetadata in storage.ts
- Fully backward compatible - all new fields are optional
- Typecheck passes

## US-002: Populate createdAt on document creation ✅
- POST /api/save sets createdAt if not already present
- POST /api/duplicate sets createdAt to current time on new doc
- GET /api/documents response includes createdAt and starred fields
- Typecheck passes

## US-003: Server-side document search endpoint ✅
- Added GET /api/documents/search?q=term endpoint
- Case-insensitive name matching, sorted by modifiedAt desc
- Returns { results: [...] } with empty array for empty query
- Foundation for future RAG search
- Typecheck passes

## US-004: Star/unstar document API and dashboard UI ✅
- Added POST /api/documents/:documentId/star toggle endpoint
- Star icon on each doc row (visible on hover, always visible when starred)
- Starred docs sort to top within any sort mode
- Gold star color (#f1c40f)
- Typecheck passes

## US-005: Copy-to-clipboard on AI messages ✅
- CopyButton component on each assistant message
- Shows on hover, checkmark for 2s after copy
- Uses navigator.clipboard.writeText
- Typecheck passes

## US-006: Retry button on AI chat errors ✅
- Stores last failed messages in ref
- Retry button appears next to error message
- Resends with same context, clears error on retry
- Typecheck passes

## US-007: Excalidraw export as PNG ✅
- Added onExport callback using excalidrawAPI.exportToBlob()
- Downloads as {docName}.png
- Export button labeled "Export PNG" in EditorShell topbar
- Typecheck passes

## US-008: Cmd+N keyboard shortcut for new document ✅
- Cmd+N / Ctrl+N opens the New dropdown on dashboard
- Only registered when Dashboard is mounted
- e.preventDefault() stops browser default
- Typecheck passes
